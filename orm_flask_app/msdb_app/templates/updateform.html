{% include 'header.html' %}
<script type="text/javascript" src="{{ url_for('static', filename='updateutils.js') }}"></script>

<div class="card">
{% if request.args.artist_id is defined %}
<form class="form-inline" action="updateartist">
    <input type="hidden" name="artist_id" value="{{artist.artist_id}}" />
    <label for="name">Artist name: </label><input id="name" type="text" name="name" / value="{{artist.name}}"><br />
    <label for="nationality">Nationality: </label><input id="nationality" type="text" name="nationality" value="{{artist.nationality}}"/><br />
    <label for="genre">Genre: </label><input id="genre" type="text" name="genre" value="{{artist.genre}}"/><br />
<div style='width: fit-content; min-width: 400px; display: flex;'>
    <div style="float: left; margin-right: 5%; WIDTH: auto;">
    <label for="songs">Songs: </label><br/>
        <select name="songs" id="songs" multiple size="10" style="min-width: 205px; width: fit-content;">
            {% for song in artist.songs %}
            <option value="{{song.song_id}}">{{song.title}}</option>
            {% endfor %}
        </select>
    </div>
    <div style="float: left; width: 50px; height: 242px; line-height: 121px;">
        <button type="button" onclick="moveItems('left', 'songs')"><i class="arrow left"></i></button>
        <button type="button" onclick="moveItems('right', 'songs')"><i class="arrow right"></i></button>
    </div>
    <div style="float: left; margin-left: 5%;">
    <label for="songsAvailable" >Add songs: </label><br/>
        <select id="songsAvailable" name="songsAvailable" multiple size="10" style="min-width: 205px; width: fit-content;">
            {% for song in songsAvailable %}
            <option value="{{song.song_id}}">{{song.title}}</option>
            {% endfor %}
        </select>
        
    </div>
</div>
    <br style="clear: both;"/>
    <button type="submit" onclick="selectAll('songs')">Update artist</button>
</form>

{% elif request.args.song_id is defined %}
<form class="form-inline" action="updatesong">
    <input type="hidden" name="song_id" value="{{song.song_id}}" />
    <label for="title">Title: </label><input id="title" type="text" name="title" value="{{song.title}}"><br />
<div style='width: fit-content; min-width: 400px; display: flex;'>
    <div style="float: left; margin-right: 5%; WIDTH: auto;">
    <label for="artists">Artist(s): </label><br/>
        <select name="artists" id="artists" multiple size="10" style="min-width: 205px; width: fit-content;">
            {% for artist in song.artists %}
            <option value="{{artist.artist_id}}">{{artist.name}}</option>
            {% endfor %}
        </select>
    </div>
    <div style="float: left; width: 50px; height: 242px; line-height: 121px;">
        <button type="button" onclick="moveItems('left', 'artists')"><i class="arrow left"></i></button>
        <button type="button" onclick="moveItems('right', 'artists')"><i class="arrow right"></i></button>
    </div>
    <div style="float: left; margin-left: 5%;">
    <label for="artistsAvailable" >Add artist(s): </label><br/>
        <select id="artistsAvailable" name="artistsAvailable" multiple size="10" style="min-width: 205px; width: fit-content;">
            {% for artist in artistsAvailable %}
            <option value="{{artist.artist_id}}">{{artist.name}}</option>
            {% endfor %}
        </select>
        
    </div>
</div>
    <br style="clear: both;"/>

    <label for="key">Key: </label>
        <select id="key" name="key">
            {% for key in songKeys %}
            <option value="{{key}}" {% if key == song.key %}selected{% endif %}>{{key}}</option>
            {% endfor %}
        </select>
    <br />
    <label for="genre">Genre: </label><input id="genre" type="text" name="genre" value="{{song.genre}}"/><br />
    <label for="bpm">BPM: </label><input id="bpm" type="number" name="bpm" min="10" max="400" value="{{song.bpm}}"/><br />
    <label for="ISRC">ISRC: </label><input id="ISRC" type="text" name="ISRC" maxlength="12" value="{{song.ISRC}}"/><br/>
    <button type="submit" onclick="selectAll('artists')">Update song</button>
</form>

{% elif request.args.sample_id is defined %}
<form class="form-inline" action="updatesample">
    <input type="hidden" name="sample_id" value="{{sample.sample_id}}" />
    <label for="instrument">Instrument: </label><input id="instrument" type="text" name="instrument" value="{{sample.instrument}}"/><br />
    <label for="genre">Genre: </label><input id="genre" type="text" name="genre" value="{{sample.genre}}"/><br />
    <label for="source">Source: </label>
        <select id="source_id" name="source_id" required>
            {% if source %}
            <option value="{{sample.source_id}}">{{source}}</option>
            {% else %}
            <option value="">--Please select a source--</option>
            {% endif %}
            {% for source in otherSources %}
            <option value="{{source.source_id}}">
                {% if source.name %}
                {{source.name}}
                {% elif source.title %}
                {{source.title}}
                {% endif %}
            </option>
            {% endfor %}
        </select><br />

<div style='width: fit-content; min-width: 400px; display: flex;'>
    <div style="float: left; margin-right: 5%; WIDTH: auto;">
    <label for="on_songs">Used on: </label><br/>
        <select name="on_songs" id="on_songs" multiple size="10" style="min-width: 205px; width: fit-content;">
            {% for song in sample.on_songs %}
            <option value="{{song.song_id}}">{{song.title}}</option>
            {% endfor %}
        </select>
    </div>
    <div style="float: left; width: 50px; height: 242px; line-height: 121px;">
        <button type="button" onclick="moveItems('left', 'on_songs')"><i class="arrow left"></i></button>
        <button type="button" onclick="moveItems('right', 'on_songs')"><i class="arrow right"></i></button>
    </div>
    <div style="float: left; margin-left: 5%;">
    <label for="songsAvailable" >Add artist(s): </label><br/>
        <select id="songsAvailable" name="songsAvailable" multiple size="10" style="min-width: 205px; width: fit-content;">
            {% for song in songsAvailable %}
            <option value="{{song.song_id}}">{{song.title}}</option>
            {% endfor %}
        </select>
        
    </div>
</div>

    <button type="submit" onclick="selectAll('on_songs')">Update sample</button>
</form>

{% elif request.args.UPC is defined %}
<form class="form-inline" action="updaterelease">
    <label for="UPC">UPC: </label><input type="number" id="UPC" name="UPC" value="{{release.UPC}}" maxlength="15" /><br />
    <label for="title">Title: </label><input id="title" type="text" name="title" value="{{release.title}}"/><br />
    <label for="releaseDate">Release Date: </label><input id="releaseDate" type="date" name="releaseDate" value="{{release.releaseDate}}"/><br />
    <label for="type">Type: </label>
        <select id="type" name="type">
            <option value="album" {% if release.type == 'album' %}selected{% endif %}>Album</option>
            <option value="single" {% if release.type == 'single' %}selected{% endif %}>Single</option>
            <option value="EP" {% if release.type == 'EP' %}selected{% endif %}>EP</option>
        </select><br />
    <label for="numSongs"># of songs: </label><input id="numSongs" type="number" name="numSongs" min="1" value="{{release.numSongs}}"/><br />
    <label for="songs">Songs in database:
    <br/>
    {% for song in release.songs %}
    <div id='song_id[{{song.song_id}}]' name="{{song.title}}">  
        <button type="button" id="deletesong" onclick="removeButton({song_id: '{{song.song_id}}', song_title: '{{song.title}}'})">Remove</button>
        {{song.title}}
    </div>
    {% endfor %}
    </label><br/>
    <input id="songsToRemove" type="hidden" name="songsToRemove" value=""/>
    <button type="button" onclick="resetRemovalList('song')">Reset</button><br/>
    <label for="addSongs">
        Add songs:
        <select id="song_id" name="song_id">
            <option value="">--Please select a song--</option>
            {% for song in otherSongs %}
            <option value="{{song.song_id}}">{{song.title}}</option>
            {% endfor %}
        </select>
    </label><br/>
    <label for="url">Spotify URL: </label>
    <input id="url" type="text" name="url" value="{{release.url}}"/><br />
    <br/><button type="submit">Update release</button>
</form>

{% elif request.args.source_id is defined %}

<form class="form-inline" action="updaterepo">
    <input type="hidden" name="source_id" value="{{repo.source_id}}" />
    <label for="name">Name: </label><input id="name" type="text" name="name" value="{{repo.name}}"/><br />
    <label for="type">Type: </label>
        <select name="type">
            <option value="pack" {% if repo.type == 'pack' %}selected{% endif %}>Pack</option>
            <option value="repository" {% if repo.type == 'repository' %}selected{% endif %}>Repository</option>
            <option value="other" {% if repo.type == 'other' %}selected{% endif %}>Other</option>
        </select><br />
    <label for="custodian">Custodian: </label><input id="custodian" type="text" name="custodian" value="{{repo.custodian}}"/><br />
    <label for="price">Price: </label><input id="price" step="0.01" type="number" name="price" value="{{repo.price}}" min="0.00"/><br />
    <label for="billed">Billed: </label>
        <select id="billed" name="billed" required>
            <option value="n/a" {% if repo.billed == 'n/a' %}selected{% endif %}>N/A</option>
            <option value="once" {% if repo.billed == 'once' %}selected{% endif %}>Once</option>
            <option value="monthly" {% if repo.billed == 'monthly' %}selected{% endif %}>Monthly</option>
            <option value="yearly" {% if repo.billed == 'yearly' %}selected{% endif %}>Yearly</option>
        </select><br />
    <button type="submit">Update Pack/Repo</button>
</form>


{% endif %}
</div>
{% include 'footer.html' %}